<script type="text/x-template" id="distribution-table-template">
    <table class="table table-bordered table-sm">
        <thead style="font-size: 70%;">
        <tr>
            <th v-for="province in allProvinces" class="text-center province-title font-weight-light" :title="province.name">[[ province.code ]]</th>
{#            {% for province in provinces %}#}
{#                <th class="text-center province-title font-weight-light" scope="col"#}
{#                    title="{{ province.name }}">{{ province.code }}</th>#}
{#            {% endfor %}#}
        </tr>
        </thead>

        <tbody>
        <tr>
{#            {% for province in provinces %}#}
{#                <td style="overflow: auto; position: relative; height: 24px;">#}
                    {# If we want to optimize this further, we should try to do a single call instead of one by province #}
{#                    {% species_presence_icons species.id province.id %}#}
{#                </td>#}
{#            {% endfor %}#}
        </tr>
        </tbody>
    </table>
</script>

<script type="text/x-template" id="distribution-viz-template">
    <div class="row">
        <template v-if="mode == 'grape'">
            <country-grape :show-border="showBorders" v-for="period in periods" :all-provinces="allProvinces"
                           :period="period"
                           :key="period.period_name"></country-grape>
        </template>

        <template v-else>
            <distribution-table :all-provinces="allProvinces"></distribution-table>
        </template>
    </div>
</script>

<script type="text/x-template" id="country-grape-template">
    <div class="col m-0 p-0" :class="{ border: showBorder}">
        <h5>[[ period.period_name ]]</h5>
        <svg viewBox="0 0 155 112">
            <province-icon v-for="province in provinces"
                           v-if="!province.partOf"
                           :pos-x="province.posX"
                           :pos-y="province.posY"
                           :province-code="province.code"
                           :is-active="province.active"
                           :key="province.name"></province-icon>

            <half-province-icon v-for="province in provinces"
                                v-if="province.partOf"
                                :pos-x="province.posX"
                                :pos-y="province.posY"
                                :start-angle="province.startAngle"
                                :end-angle="province.endAngle"
                                :province-code="province.code"
                                :is-active="province.active"
                                :key="province.name"></half-province-icon>

            <line x1="75" y1="48" x2="105" y2="48" style="stroke:rgb(0,0,0);stroke-width:1"/>
        </svg>
    </div>
</script>

<script type="text/x-template" id="half-province-icon-template">
    <g>
        <path fill="none" :d="moveList" class="province" v-bind:class="{ activeProvince: isActive }"/>

        <text :x="posX" :y="textPosY" fill="black" text-anchor="middle" dominant-baseline="middle" font-size="9"
              v-bind:class="{ activeText: isActive }">
            [[ provinceCode ]]
        </text>
    </g>
</script>

<script type="text/x-template" id="province-icon-template">
    <g>
        <circle
                :cx="posX"
                :cy="posY"
                :r="radius"
                class="province"
                v-bind:class="{ activeProvince: isActive }"/>

        <text :x="posX" :y="posY" fill="black" text-anchor="middle" dominant-baseline="middle" font-size="11"
              v-bind:class="{ activeText: isActive }">
            [[ provinceCode ]]
        </text>

    </g>
</script>